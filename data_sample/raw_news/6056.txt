WASHINGTON ― House Minority Leader Nancy Pelosi (D-Calf.) spoke on the House floor for more than eight hours Wednesday, adamant she would not support an emerging long-term budget deal unless House Speaker Paul Ryan (R-Wis.) commits to allow a vote on legislation protecting young undocumented immigrants. Such an announcement would be similar to the one Senate Majority Leader Mitch McConnell (R-Ky.) made last month that helped reopen the government.

“If a Dream Act were brought to the floor, it would pass immediately, with strong bipartisan support,” Pelosi said Wednesday in a speech on the House floor. “The Republican moral cowardice must end.”

“Without a commitment from Speaker Ryan comparable to the commitment from Leader McConnell, this package does not have my support,” Pelosi added later in a statement.

Her speech set a record for the longest continuous remarks on the House floor. The record had been previously set in 1909, when a lawmaker spoke for five hours and 15 minutes, according to the House Historian’s Office.

Pelosi wrapped up her speech around 6:10 p.m., about eight hours and five minutes after she started.

House Minority Leader Nancy Pelosi is pushing for House Speaker Paul Ryan to promise a vote on legislation protecting young undocumented immigrants. Joshua Roberts/Reuters

Top Senate leaders are working to finalize a two-year budget deal that would boost defense spending sought by President Donald Trump as well as some domestic spending sought by Democrats. The House, meanwhile, passed a short-term bill on Tuesday that would extend funding for the government until March 23, but it is expected to be altered in the Senate ahead of a Thursday deadline.

As Pelosi delivered her speech in the House, McConnell and Senate Minority Leader Chuck Schumer (D-N.Y.) announced they had reached a budget deal, which Senate Democrats are expected to support because the Republican leader promised an upcoming immigration vote.

But its fate is uncertain in the House, where fiscal hawks oppose a spending increase and most Democrats want Dreamer protections to be part of the deal.

Trump put nearly 700,000 undocumented young people at risk of losing deportation protection and work permits when he ended the Deferred Action for Childhood Arrivals program, or DACA, in September. He told Congress it had until March, when DACA recipients will begin to lose protections in larger numbers, to pass a bill to help them.

Pelosi shared personal stories of many so-called Dreamers, the term for undocumented immigrants who came to the U.S. as children, on Wednesday and read aloud their words about wanting to remain in the U.S. The California Democrat delivered extended remarks, according to her rights as minority leader, which allow her to speak without a time limit on the House floor.

She and other Democrats have been calling for a vote on the Dream Act, a bill that would grant legal status to undocumented young people who came to the U.S. as children, including DACA recipients. But Ryan, who controls the House floor, hasn’t allowed for a vote on the Dream Act or other bipartisan bills to help Dreamers.

“I don’t know when we’ll have another opportunity that matches today for us to just get a simple commitment from the speaker of the House that he will give us a vote,” she said. “There’s no guarantee. We’ll have the debate. People will weigh in. They will make their voices heard. Congress again will work its will.”

McConnell said on Tuesday that after Congress approves funding on Thursday, the Senate will have an open process for considering immigration legislation, allowing all members to present their ideas. But Ryan said he’ll only allow the House to vote on an immigration bill that Trump will sign.

“We’re not going to bring immigration legislation through that the president doesn’t support,” Ryan told reporters at a Tuesday news conference.

Trump said he would support a path to citizenship for 1.8 million Dreamers but is demanding measures that Democrats and even some Republicans oppose. Democrats have said they would support border security in exchange for Dreamer protections ― some of them even saying they would allow for Trump’s wall ― but draw the line on measures that would hurt asylum-seekers, including children. Democrats also oppose Trump’s demands to dramatically reduce legal immigration options by ending the diversity visa lottery and phasing out types of family-based green cards. Some Republicans also oppose cuts to legal immigration.

Many advocates believe the best chance for Dreamer protections is for Congress to pass what it can and then send it to the president, versus conforming to his demands that tank a deal.

Pelosi said Republicans who have put forward proposals have shown courage and Ryan should respect the fact that a large number of elected representatives want a vote.

“The speaker of the House is saying we don’t matter here, the members of the House,” she said. “We don’t count in this consideration. Because maybe we just don’t have the courage to do what we need to do. I believe we do.”

Calling for a vote isn’t enough, Rep. Luis Gutierrez (D-Ill.) argued Wednesday on MSNBC, hours into Pelosi’s speech. He said Democrats should continue to demand that Dreamer protections be a part of the spending deal rather than giving away leverage.

“If Democrats join with Republicans on this deal and lift the caps, what you will have is a collusion with Donald Trump to deport Dreamers,” he said on “MTP Daily.” “And I hope that does not happen.”

This story has been updated with additional comments from lawmakers, and with details about the record of speaking on the House floor.