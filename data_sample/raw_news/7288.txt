WASHINGTON ― A day before a government shutdown, House Republican leaders cut a last-minute deal with conservatives to get a one-month spending bill out of their chamber and on to the Senate floor. But that legislation to extend government funding still faces challenges, particularly after conservatives won concessions that could set up a shutdown in the coming weeks and the Senate delayed a vote late Thursday night.

The House voted 230-197 for the four-week continuing resolution, with 11 Republicans voting no and six Democrats voting for it. A couple of hours later, Senate Majority Leader Mitch McConnell (R-Ky.) set up a vote to end debate on the spending bill, and then promptly delayed it.

Senate Minority Leader Chuck Schumer (D-N.Y.) urged Republicans to hold the vote now, so Democrats could demonstrate that Republicans didn’t have the votes and lawmakers from both sides could work toward a different solution. But McConnell wasn’t having it. Now the Senate appears likely to vote Friday on ending debate, and unless something changes overnight, that vote still looks like it will fail.

President Donald Trump weighed in Friday, acknowledging the impasse and calling for more Republican victories in 2018:

Government Funding Bill past last night in the House of Representatives. Now Democrats are needed if it is to pass in the Senate - but they want illegal immigration and weak borders. Shutdown coming? We need more Republican victories in 2018! — Donald J. Trump (@realDonaldTrump) January 19, 2018

All day Thursday, the stopgap spending bill has looked to be in doubt, both because of Senate Democrats and House conservatives. In the House, the conservative House Freedom Caucus confidently told any reporter who’d listen that they had enough votes in their caucus to stop the bill, assuming every Democrat opposed the measure.

The promises from Freedom Caucus Chairman Mark Meadows (R-N.C.) that he could ― and would ― sink the stopgap spending bill eventually forced House GOP leadership to cut a deal. In exchange for about 20 votes that Meadows said he had in his back pocket, Republican leaders agreed to hold a vote on a defense-only appropriations bill in the next 10 legislative days. That bill would break spending caps that lawmakers set in 2011, but it would not simultaneously raise those limits for non-defense spending. (The bill Republicans passed Thursday night would once again delay “sequestration,” the automatic spending cuts that would be triggered without an agreement.)

Conservatives also got commitments on the House voting on a conservative immigration bill that, in return for extending the Deferred Action for Childhood Arrivals (DACA) program, would approve money for a border wall, curtail family reunification immigration and end the diversity visa lottery program ― among other right-wing immigration priorities.

President Donald Trump personally approved of the agreement Thursday afternoon when he called Meadows during a Freedom Caucus meeting. With the president’s blessing, Meadows and former HFC Chairman Jim Jordan (R-Ohio) went to House Speaker Paul Ryan’s office and cut the deal.

The agreement got the bill out of the House, but it hasn’t guaranteed anything in the Senate. If anything, it may make Senate passage of the four-week continuing resolution (CR) even more difficult.

Senate Democrats have been lining up against this four-week CR for days now, even though it funds the Children’s Health Insurance Program for six years. Democrats oppose the bill because it doesn’t deliver any legislative fix for Dreamers, the undocumented immigrants who were brought to the United States as children.

Without a DACA deal, Senate Democrats look poised to vote against ending debate on the four-week CR. And if Republicans can’t close debate, government funding will lapse at midnight Friday.

Democrats always could supply enough support for the Senate to get to the magic number of 60 votes to push through the CR, but Democrats instead look more apt to reject the bill and maybe agree to a shorter term for the spending measure ― or insist on assurances of their own.

When HuffPost asked Meadows Thursday night what, in effect, conservatives really got ― because the deal conservatives struck was really to just hold two votes, not necessarily enact any real legislative changes, and defense hawks appeared to already have a deal to bring up a separate spending bill for the Pentagon ― Meadows said there were “subplots” to the agreement that he wouldn’t go into now.

Those subplots look like a pact that Republicans will pass the two bills conservatives angled for ― the defense-only spending legislation and the immigration measure ― and then not cave when Congress hits the next government funding deadline.

Trump and conservatives have seemed open to a shutdown fight, and, ultimately, this deal might move Congress closer to a shutdown either this week or in the near future.

Senate Democrats don’t, at the moment, appear to be bluffing that they’ll oppose ending debate on this short-term funding bill. And without an agreement, lawmakers can’t send a bill to the president’s desk.

Senators could strike a new deal on a CR, either for that shorter-term bill that some Democrats have indicated they’d support, or they could come up with a larger deal that would address DACA and win the support of Democrats in both chambers.

But short of those possibilities, or some other last-minute option, Congress still appears to be veering toward a shutdown that no lawmaker really wanted.