WASHINGTON ― After months of delays by Republicans, senators unveiled bipartisan legislation Wednesday that cracks down on sexual harassment in their ranks.

The bill, hashed out by Sens. Amy Klobuchar (D-Minn.) and Roy Blunt (R-Mo.), makes badly needed updates to the Congressional Accountability Act, a decades-old law that set up the process for handling workplace complaints about harassment and discrimination on Capitol Hill. It eliminates rules forcing victims of sexual harassment to undergo counseling, mandatory arbitration and a 30-day “cooling off” period before taking a complaint to court.

Here’s a section-by-section overview of their bill.

The most contentious provision in the bill is its requirement that lawmakers pay out of pocket for sexual harassment and discrimination settlements.

That language was part of similar legislation that easily passed the House in early February. But when the House bill arrived in the Senate, some anonymous male GOP senators opposed that provision and stopped the bill in its tracks.

In the months that followed, senators who had been demanding action grew agitated. All 22 female senators from both parties ripped Senate Majority Leader Mitch McConnell (R-Ky.) and Senate Minority Leader Chuck Schumer (D-N.Y.) for not making the bill a priority. Every male Democratic senator ― plus Sen. Ted Cruz (R-Texas), who co-sponsored a sexual harassment bill with Sen. Kirsten Gillibrand (D-N.Y.) ― wrote to McConnell urging him to do something.

The Senate’s delays looked particularly bad as the Me Too movement hit Capitol Hill last fall and triggered a series of sudden retirements by lawmakers accused of sexual misconduct. One of them, former Rep. Blake Farenthold (R-Texas), quit without repaying $84,000 in taxpayer money he spent on a sexual harassment settlement.

But Wednesday’s breakthrough means the bill has a good chance of moving ― and moving quickly. Blunt and Klobuchar have support from their party leaders, and they presented their proposal to their respective caucuses on Tuesday afternoon. Barring any last-minute objections, Blunt suggested the Senate could vote on the bill by the end of the week.

“With this agreement, both parties are coming together to update the laws governing how the Congress addresses workplace claims and protecting staff and others from harassment,” McConnell and Schumer said in a joint statement. “We’re optimistic that after our members review the legislation, this bill will pass the Senate in short order.”

Congress clearly needs to deal with this. Four out of 10 female congressional aides say sexual harassment is a problem on Capitol Hill, according to a 2016 CQ Roll Call survey. The same survey found that 1 in 6 said they had been personally victimized.

Notably, the Senate bill takes steps to prevent another Farenthold-type situation. It authorizes withholding compensation from a lawmaker if he or she doesn’t repay a harassment settlement initially paid out with taxpayer money. If the lawmaker hasn’t paid up within 180 days, the Treasury Department is authorized to take money out of that lawmaker’s compensation or annuity.

The bill now heads to the House, where lawmakers may not like the changes made by the Senate. Both chambers will have to agree on its final language before it can go to President Donald Trump to become law.

It took months, but Sens. Amy Klobuchar (D-Minn.) and Roy Blunt (R-Mo.) have hashed out a deal to require lawmakers to pay out-of-pocket for sexual harassment settlements. Bloomberg via Getty Images

It’s not entirely clear how the Senate plan differs from the House bill, but Klobuchar said there are dozens of changes. One difference is that the House bill proposed a 45-day limit on when a staffer can bring a federal court case against a member of Congress allegedly harassing him or her. The Senate proposal doubles that time frame to 90 days.

“There were many, many, many things we worked on,” Klobuchar said. “We were able to negotiate them one by one and get, what I think, is a very good bill.”

It’s still a mystery which GOP senators opposed the provision requiring them to be personally liable for sexual harassment settlements. Under the current system, the U.S. government ― i.e., taxpayers ― is considered lawmakers’ employer and foots the bill for any settlement involving a lawmaker or an aide.

Blunt, for one, got snippy Tuesday when asked if his bill would require staff and members of Congress to pay out of pocket for settlements. That is the case under the House bill. But Blunt said the Senate bill would only apply to lawmakers.

“Non-members would still be covered by their employer ― like every other employee in America is for their actions,” he told reporters.

This article has been updated to reflect that the bill has been introduced.