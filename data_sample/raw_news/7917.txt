A ban on “conversion therapy,” a discredited practice that attempts to change sexual orientation or gender identity, failed to pass Tuesday in New Hampshire’s House of Representatives.

Two proposed bills would have protected minors from treatments aimed at erasing LGBTQ identity that medical professionals have labeled ineffective and potentially harmful.

Both the House and Senate versions of the legislation failed narrowly in a vote that fell largely along party lines, with Republicans generally opposing any change to existing state law. The measure was introduced in the New Hampshire Senate by Sen. Martha Fuller Clark (D) after a similar change failed in the state two years ago.

Laws banning conversion therapy have been passed in at least nine states, Washington, D.C., and more than two dozen municipalities, according to the National Center for Lesbian Rights. Florida’s Broward County, which includes Fort Lauderdale, on Tuesday became the latest locale to ban conversion therapy. Similar legislation is pending in at least six states.

The American Psychological Association and the American Psychiatric Association both caution against conversion therapy, also known as reparative therapy, on the grounds that it can be harmful. Its methods can include talk therapy, electroshock therapy and treating LGBTQ identity as an addiction.

Supporters of the New Hampshire legislation noted that being gay is not a mental health issue and should not be treated as such. Those who argued against the ban said it went too far in preventing counselors from talking to minors about temporary crushes.

Lawmakers also said they found no evidence the practice existed in New Hampshire, the Associated Press reported.

“Now, I would be against coercive therapy, but what about those who want help from a professional?” Republican Rep. Mark Pearson said Tuesday, WMUR-TV reported.

Pearson added that he thought the legislation was “unnecessary at best, and quite possibly harmful to youngsters that want an honest conversation” about sexual issues

Ray Buckley, chair of the New Hampshire Democratic Party, slammed House Republicans, saying in a statement they “are telling children that who they are is not good enough.”

The bills were also supported by the New Hampshire Log Cabin Republicans, a LGBTQ group whose co-chair, Jennifer Horn, called on her fellow conservatives to push a revised version forward after the votes.