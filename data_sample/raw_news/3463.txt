WASHINGTON ― Six months late and about 17 hours after they first introduced the bill, House lawmakers on Thursday approved a 2,232-page spending bill that will fund the federal government until October and prevent an imminent shutdown.

The massive omnibus spending deal was the culmination of months of negotiations between Republicans and Democrats. Congress has passed five continuing resolutions since September to extend government operations and allow lawmakers more time to negotiate this deal.

The House passed the bill 256-167, with 145 Republicans and 111 Democrats voting yes, and 90 Republicans and 77 Democrats voting no.

Under a previous agreement to lift spending caps, the $1.3 trillion deal increases defense spending by $80 billion and non-defense spending by $63 billion for this fiscal year. The military gets a 2.4 percent pay raise, while civilian personnel get a 1.9 percent bump.

President Donald Trump gets some $1.6 billion for border security measures, although not necessarily for the “wall” he has long promised. Instead, the bill provides $251 million for secondary fencing, $445 million for levee fencing, $196 million for “primary pedestrian fencing” and $445 million for the replacement of existing fencing, according to The Washington Post. The legislation specifically prohibits Trump from making any of the wall prototypes designed last year.

The bill provides funding for a number of infrastructure projects ― including the New York-New Jersey Gateway program, a rail project for the New York City area. Trump fought hard not to simply fund that project, believing he could negotiate money for his wall with Senate Minority Leader Chuck Schumer (D-N.Y.) in exchange for Gateway spending. But ultimately the New York-area lawmakers who wanted the project won.

The legislation also includes the so-called Fix NICS measure, which tightens up the system for reporting criminal records to the National Instant Criminal Background Check System. And the bill corrects a “grain glitch” in the GOP tax law that gave farmer-owned cooperatives a significant tax benefit over other agricultural corporations. In exchange for that adjustment, Democrats got an expansion of a low-income housing credit.

The process that produced the spending bill was the exact sort of backroom dealing that Trump railed against in his election. Key lawmakers kept details of the legislation private for months, and then they sprung the text of the measure on other members a little after 8 p.m. on Wednesday. Shortly before 1 p.m. Thursday, the House was voting on the legislation, meaning it was impossible for any of those other lawmakers to have read the bill in its entirety before the vote.

Rep. Mark Meadows (R-N.C.), chairman of the House Freedom Caucus, said he tried to stay up all night to read the bill. “As fast as I was reading it, there’s no way they read it,” Meadows said, noting that he reached the 700s pages of the 2,232-page bill.

House Minority Whip Steny Hoyer (D-Md.) also made a theatrical show of the bill, holding up the massive stack of pages and saying he was waiting for “the tea party who harangued me and my party” about reading the bill.

“Is there no shame?” Hoyer asked. “Is there no realization of the hypocrisy that is being displayed?”

House Minority Leader Nancy Pelosi (D-Calif.) accused her GOP colleagues of attempting to speed through the process and get out of town before the big march for gun control in Washington on Saturday.

Rep. Raul Labrador (R-Idaho), another Freedom Caucus member, also criticized the process, claiming that congressional leaders had planned a two-week recess just before this vote so they could pressure other lawmakers into supporting the bill.

“It’s why I’m leaving Congress,” Labrador said, who is instead running for governor of Idaho. “These people have no shame. And they’ll say whatever to get elected. But I think the American people deserve better than this.”