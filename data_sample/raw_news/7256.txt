The Trump administration violated two court orders to stop enforcing the president’s restrictions on travel from seven Muslim-majority countries last year, the Department of Homeland Security’s Inspector General wrote in a report released Friday.

That’s a big deal. The constitution requires executive branch officials to obey lawful court orders. “No Department of Government is free to circumvent court orders, even when they are exceptionally difficult to enforce,” the IG report noted. But in the early days of the Trump administration, DHS — then led by Gen. John Kelly, who is now President Donald Trump’s chief of staff — did just that, the inspector general found.

Here’s how it went down.

After U.S. President Donald Trump issued a travel ban on seven Muslim-majority countries, leaving travelers with visas to the U.S. in limbo at JFK airport, protesters gathered to demand they be released. Andrew Lichtenstein via Getty Images

First, “shock and confusion.”

Homeland Security was “caught by surprise” when Trump signed the hastily drafted executive order on the afternoon of Friday, Jan. 27, the report said. Without a copy of the order, Customs and Border Protection officials had to rely on media accounts to predict what they’d have to do. Some CBP officers in the field “reacted with shock and confusion.” The Department of Homeland Security’s top lawyer, Joseph Maher, didn’t see a draft of the order until one hour before it was signed. No one at CBP saw it before it was signed at all.

The rushed implementation and sloppy crafting of the order led to widespread confusion over key questions, like whether green card holders were subjected to the ban. The question wasn’t resolved until well into the evening Trump signed the order.

Saturday: The Trump administration stops enforcing the ban in U.S. airports, but continues blocking people from boarding planes

The night Trump issued his order, a federal judge in Brooklyn halted the travel ban with a nationwide injunction. That case was brought by Hameed Darweesh, an Iraqi national who faced threats in his home country after working for the U.S. military. It was the first of a spate of rulings against the travel ban issued by federal judges across the country.

After the Darweesh decision, CBP stopped enforcing the travel ban at U.S. airports, where agents had been detaining some of the people from the seven countries, subjecting them to prolonged questioning and threatening them with deportation if they did not voluntarily board a flight out of the country. Instead, those stuck in limbo without valid visas were given waivers and allowed to enter the country.

Courts order the Trump administration to allow travelers to board U.S.-bound planes, but DHS ignores the orders

The day after the Darweesh order, a federal judge in Boston issued a temporary restraining order directing the Trump administration to tell airlines that travelers wouldn’t be denied entry to the United States because of the executive order.

A federal judge in Los Angeles handed down a similar order a couple of days later, telling the Trump administration to stop “blocking the entry” of people subject to the order while the lawsuit moved forward. Those straightforward words would obviously require CBP to stop telling airlines not to board citizens of the seven Muslim-majority countries.

But even after the Boston and Los Angeles decisions, CBP agents continued doing “everything in its power” to block travelers who had not sued the government from boarding planes for the U.S. — in violation of the Boston and L.A. orders, the inspector general’s team found.

“By preventing individuals subject to the EO [executive order] from reaching the United States, through various methods, CBP effectively circumvented provisions of these orders,” the report said.

Those actions “reflect direction from the very top of DHS,” the report said.

Immigrants join activists for an evening protest in Manhattan against the travel restrictions on Muslim-majority countries on June 29, 2017. VIEW press via Getty Images

DHS denies doing anything wrong

DHS denied that the Trump administration violated the court orders, writing that the independent inspector general’s report was based on “legal and factual inaccuracies and is methodologically flawed.”

“It is important for Congress and the public to know that DHS did not countenance any violation of a court order, including those specifically discussed in this Report,” DHS official Jim Crumpacker wrote in a letter attached to the report. “Any implication or statement to the contrary is unfortunate and misleading.”

But the ACLU echoed the inspector general. “The findings that the federal government violated court orders are deeply troubling,” Cody Wofsy, a staff attorney with the ACLU Immigrants’ Rights Project who worked on the Darweesh case, told HuffPost. “The report underscores that effectively the White House devised and implemented this policy without consultation with the national security experts in the government. And really the same policy is now in effect with really only minor changes.”

The fight over the report

The report’s conclusions were first made public in November, when the Department of Homeland Security’s former Inspector General, John Roth, sent a letter to the three senators who requested the investigation into the widely criticized rollout of the travel restrictions. Roth resigned later that month.

But DHS slowed the report’s release for months, arguing that some of the material shouldn’t be made public because it would reveal confidential deliberations. Several passages of the report released Friday are redacted.

Sen. Tammy Duckworth (D-Ill.), who joined two of her Senate colleagues in requesting the report last January, is livid about what investigators found — and that the administration is still hiding parts of the report.